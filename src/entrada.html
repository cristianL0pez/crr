<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Seleccionar tipo de cirugía</title>
</head>
<body>
  <form onSubmit={handleFormSubmit}>
  <label htmlFor="edad">Edad:</label>
  <input type="number" name="edad" id="edad" required />
  <br>
  <label htmlFor="tipo_cirugia">Tipo de Cirugía:</label>
  <select name="tipo_cirugia" id="tipo_cirugia" required>
    {tiposCirugia.map((tipo) => (
      <option key={tipo} value={tipo}>
        {tipo}
      </option>
    ))}
  </select>
  <br>
  <label htmlFor="enfermedad">Enfermedad Adyacente:</label>
  <input type="text" name="enfermedad" id="enfermedad" required />

  <button type="submit">Enviar</button>
</form>
<div id="resultado"></div>

  <script>
    fetch("http://127.0.0.1/tipos_cirugia")
      .then(response => response.json())
      .then(data => {
        const select = document.getElementById("tipo_cirugia");
        data.tipos_cirugia.forEach(tipo_cirugia => {
          const option = document.createElement("option");
          option.value = tipo_cirugia;
          option.text = tipo_cirugia;
          select.appendChild(option);
        });
      })
      .catch(error => console.error(error));

      function handleFormSubmit(event) {
        event.preventDefault();
      
        const formData = new FormData(event.target);
        const edad = formData.get("edad");
        const tipoCirugia = formData.get("tipo_cirugia");
        const enfermedad = formData.get("enfermedad");
      
          fetch("http://127.0.0.1/analisis_paciente", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
                body: JSON.stringify({
                  edad,
                  tipo_cirugia: tipoCirugia,
                  enfermedad,
                }),
              })
            .then((response) => response.json())
            .then((data) => {
            // Mostrar el resultado del análisis al usuario
            const resultadoDiv = document.getElementById("resultado");
            resultadoDiv.innerText = `ASA: ${data.resultado}`;
                })
                .catch((error) => console.error(error));
            }
  </script>
</body>
</html>

